<p float="left">
  <img src="/Pictures/Logos/grafana_logo.png" height="100" />
  <img src="/Pictures/Logos/postgresql_logo.png" height="100" />
  <img src="/Pictures/Logos/loki_logo.png" height="100" /> 
  <img src="/Pictures/Logos/flask_logo.png" height="100" /> 
  <img src="/Pictures/Logos/docker_logo.png" height="100" /> 
</p>

# Investment
It is containerized application to track results of funds investment with visual representation in Grafana.
Automatically calculates the profit (amount of money) and refund in following time frames:
- last day
- last week
- last month

Supports different investment owners and multiple investment wallets for each owner.

## Sample Dashboards
Presented dashboards are automatically provisioned in Grafana instance.

### Wallet View
![image](/Pictures/Investment_Wallet_1_of_2.png)
![image](/Pictures/Investment_Wallet_2_of_2.png)

### Management View
![image](/Pictures/Investment_Management.png)

Management view allows to manually trigger fund quotation download and investment result re-calculation. 
As the data kept in a database like quotation and investment results is full recoverable,
there are also buttons to delete quotation and results in order to perform all calculation steps from scratch in case of any errors.

Consists of following components:
- [**PostgreSQL**](/PostgreSQL/) - Database to store fund quotation and investment results
- [**Flask**](/Flask/) - Backend app which downloads fund quotation from Analizy.pl and calculates investment results
- [**Grafana**](/Grafana/) - Visualization of the results
- [**Checker**](/Checker/) - On startup imports investment configuration to the system. 
During the system runtime it is responsible for checking if there are new fund quotation available, 
triggers **Flask** to download them, and recalculate the results.
- [**Loki**](/Loki/) - Log server to capture logs from application components.
- [**Promtail**](/Promtail/) - Log scraper, scrapes logs generated by apps and send them to **Loki**.


## Startup
Run `Re-build_from_scratch.sh` script, which will build docker images, and start docker compose.
During the application startup sample investment config will be inserted to the system, and fund quotation will be downloaded from Analizy.pl to calculate refunds.

Alternatively you can run following steps to build and start containers:
1. `docker compose build`
2. `docker compose up -d`

> [!IMPORTANT] 
> Application data files are stored locally at `./APP_DATA` and `./APP_LOG`. To re-deploy application from scratch you need to remove them.

### Grafana UI
Grafana will be available at: http://localhost:3000/login.

Default credentials:
- username: `admin`
- password: `admin`
